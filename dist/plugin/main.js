(()=>{"use strict";var e={667:(e,t,s)=>{s.r(t)},759:(e,t,s)=>{s.r(t)},131:(e,t,s)=>{s.r(t)},39:(e,t,s)=>{s.r(t)},395:(e,t,s)=>{s.r(t)},833:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=s(620),n=s(89);t.App=class{constructor(e,t){this.callbacks={onChange:()=>{}},this.presenter=this.init(e,t)}update(e){this.updateCallbacks(e),this.presenter.updateOptions(e)}getOptions(){return this.presenter.getOptions()}init(e,t){const s=Object.assign({},n.defaultConfig),r=new i.Model(s,t),o=new i.View(e),a=new i.Presenter(o,r);return this.attachEventEmitters(a),this.updateCallbacks(t),a}attachEventEmitters(e){e.subscribe("onChange",(e=>{this.callbacks.onChange(e)}))}updateCallbacks(e){void 0!==e&&void 0!==e.onChange&&(this.callbacks={onChange:e.onChange})}}},20:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;const i=s(995),n=s(538),r=s(143);class o extends i.EventEmitter{constructor(e,t){super(),this.options=(0,n.validate)(e,t)}updateOptions(e){this.options=(0,n.validate)(this.options,e),this.emit("UpdatedModelOptions",this.options)}getOptions(){return this.options}calculateValueUsingFraction({position:e,type:t}){this.options=(0,r.calculateValue)(e,this.options,t),this.emit("UpdatedModelValues",this.options)}calculateNearValueUsingFraction(e){this.options=(0,r.calculateValue)(e,this.options),this.emit("UpdatedModelValues",this.options)}updateNearValue(e){this.options=(0,r.updateNearValue)(e,this.options),this.emit("UpdatedModelValues",this.options)}updateValueByStep({type:e,touchRoute:t}){this.options=(0,r.updateOptionsByStep)(t,this.options,e),this.emit("UpdatedModelValues",this.options)}}t.Model=o},143:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateNearValue=t.calculateValue=t.updateOptionsByStep=void 0;const s=({from:e,to:t,min:s,max:i,isRange:n},r)=>["from"!==r&&n?e:s,"from"===r?t:i],i=(e,{step:t,from:i,to:n,min:r,max:o,isRange:a},d)=>{const[c,l]=s({from:i,to:n,min:r,max:o,isRange:a},d),u="from"===d?i:n,p=Math.abs(e-u),h=p%t;return((e,t)=>{const[,s]=String(t).split(".");return void 0===s?e:Number(e.toFixed(s.length))})(e<c?c:e>l?l:p<t/2?u:h<t/2?e>u?e-h:e+h:e+h-t<c?c:e-h+t>l?l:e>u?e-h+t:e+h-t,t)},n=(e,{isRange:t,from:s,to:i})=>{if(!t)return"to";const n=Math.abs(s-e),r=Math.abs(i-e);return n===r?s>e?"from":"to":n<r?"from":"to"};t.updateOptionsByStep=(e,t,i)=>{const n="up"===e?t[i]+t.step:t[i]-t.step,[r,o]=s(t,i);return n<r?Object.assign(Object.assign({},t),{[i]:r}):n>o?Object.assign(Object.assign({},t),{[i]:o}):Object.assign(Object.assign({},t),{[i]:n})},t.calculateValue=(e,t,s)=>{const r=(({x:e,y:t},{min:s,max:i,isVertical:n})=>(i-s)*(n?t:e)+s)(e,t);if(void 0!==s)return Object.assign(Object.assign({},t),{[s]:i(r,t,s)});const o=n(r,t);return Object.assign(Object.assign({},t),{[o]:i(r,t,o)})},t.updateNearValue=(e,t)=>{const s=n(e,t);return Object.assign(Object.assign({},t),{[s]:e})}},538:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const s=(e,t)=>-1!==String(t).search(/^(-|\+)?([0-9]+)?(\.|,)?([0-9]+)$/)?Number(t):e;t.validate=(e,t)=>{const i="boolean"==typeof(null==t?void 0:t.isRange)?t.isRange:e.isRange,n="boolean"==typeof(null==t?void 0:t.isVertical)?t.isVertical:e.isVertical,r="boolean"==typeof(null==t?void 0:t.hasTip)?t.hasTip:e.hasTip,o="boolean"==typeof(null==t?void 0:t.hasScale)?t.hasScale:e.hasScale,{min:a,max:d}=((e,t)=>{const i=s(e.min,null==t?void 0:t.min),n=s(e.max,null==t?void 0:t.max);if(i===n)return{min:i,max:n+1};const[r,o]=[i,n].sort(((e,t)=>e-t));return{min:r,max:o}})(e,t),{from:c,to:l}=((e,t,i,n)=>{const r=s(e.from,null==n?void 0:n.from),o=s(e.to,null==n?void 0:n.to),[a,d]=[r,o].sort(((e,t)=>e-t)),c=((e,t,s)=>s>t?t:s<e?e:s)(t,i,d);return{from:((e,t,s)=>s<e?e:s>t?t:s)(t,c,a),to:c}})(e,a,d,t);return{from:c,to:l,min:a,max:d,step:((e,t,i,n)=>{const r=s(e.step,null==n?void 0:n.step);if(r<=0)return 1;const o=i-t;return r<o?r:o})(e,a,d,t),isRange:i,isVertical:n,hasScale:o,hasTip:r}}},867:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Presenter=void 0;const i=s(995);class n extends i.EventEmitter{constructor(e,t){super(),this.view=e,this.model=t,this.attachEventEmittersToModel().attachEventEmittersToView()}updateOptions(e){this.model.updateOptions(e)}getOptions(){return this.model.getOptions()}attachEventEmittersToModel(){const e=({position:e,type:t})=>{this.model.calculateValueUsingFraction({position:e,type:t})},t=({type:e,touchRoute:t})=>{this.model.updateValueByStep({type:e,touchRoute:t})},s=({position:e})=>{this.model.calculateNearValueUsingFraction(e)};return this.view.subViews.scale.subscribe("ClickScale",(({targetNumber:e})=>{this.model.updateNearValue(e)})),this.view.subViews.runnerFrom.subscribe("ChangedRunnerPosition",e),this.view.subViews.runnerTo.subscribe("ChangedRunnerPosition",e),this.view.subViews.runnerFrom.subscribe("ChangedRunnerPositionStep",t),this.view.subViews.runnerTo.subscribe("ChangedRunnerPositionStep",t),this.view.subViews.runnerFrom.subscribe("ChangedNearRunnerPosition",s),this.view.subViews.runnerTo.subscribe("ChangedNearRunnerPosition",s),this.view.subViews.tip.subscribe("ChangedNearRunnerPosition",s),this.view.subViews.tip.subscribe("ChangedRunnerPosition",e),this}attachEventEmittersToView(){return this.model.subscribe("UpdatedModelOptions",(e=>{this.view.render(e),this.emit("onChange",e)})),this.model.subscribe("UpdatedModelValues",(e=>{this.view.update(e),this.emit("onChange",e)})),this}}t.Presenter=n},341:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0,s(395);const i=s(995),n=s(766);class r extends i.EventEmitter{constructor(e){super(),this.props={target:"from"};const{dom:t,subViews:s}=this.init(e);this.dom=t,this.subViews=s}render(e){const{isVertical:t,isRange:s}=e;this.props=(0,n.calculateTarget)(e),(0,n.toggleVertical)(this.dom,t),this.subViews.tip.render(e),this.subViews.runnerFrom.render(s),this.subViews.runnerTo.render(s),this.subViews.range.render(),this.subViews.scale.render(e),this.updateSubViews(e)}update(e){this.updateSubViews(e)}init(e){const t=(0,n.createElements)(e),s=(0,n.initSubViews)(t);return this.subscribeToRunnerAndTip(s),{dom:t,subViews:s}}subscribeToRunnerAndTip({runnerFrom:e,runnerTo:t,tip:s}){const i=({type:e})=>{this.props={target:e}};return e.subscribe("ChangedRunnerPosition",i),t.subscribe("ChangedRunnerPosition",i),s.subscribe("ChangedRunnerPosition",i),this}updateSubViews(e){return this.subViews.tip.update(e),this.subViews.range.update(e),this.subViews.runnerFrom.update(e,this.props.target),this.subViews.runnerTo.update(e,this.props.target),this}}t.View=r},766:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toggleVertical=t.calculateTarget=t.createElements=t.initSubViews=void 0;const i=s(195);t.createElements=e=>{const t=document.createElement("div");t.classList.add("slider");const s=document.createElement("div");return s.classList.add("slider__bar-container"),e.appendChild(t),t.appendChild(s),{root:e,barContainer:s,slider:t}},t.initSubViews=e=>({tip:new i.Tip(e.slider),range:new i.Range(e.barContainer),scale:new i.Scale(e.slider),runnerFrom:new i.Runner(e.barContainer,"from"),runnerTo:new i.Runner(e.barContainer,"to")}),t.calculateTarget=({from:e,min:t,max:s})=>{const{abs:i}=Math;return{target:i(t-e)/i(s-t)<.5?"to":"from"}},t.toggleVertical=({slider:e},t)=>{t?e.classList.add("slider_vertical"):e.classList.remove("slider_vertical")}},512:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Range=void 0,s(667);const i=s(594);t.Range=class{constructor(e){this.props={isRender:!1};const{dom:t}=(0,i.init)(e);this.dom=t}render(){this.props.isRender||(this.props={isRender:!0},this.dom.root.appendChild(this.dom.range))}update(e){(0,i.changeDimensions)(this.dom.range,e)}}},594:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeDimensions=t.init=void 0;const i=s(868);t.init=e=>({dom:(e=>({root:e,range:i.helpers.createElement("slider__range")}))(e)}),t.changeDimensions=(e,{min:t,max:s,isVertical:n,isRange:r,from:o,to:a})=>{const d=e,c=r?i.helpers.calculatePercent(o,t,s):0,l=i.helpers.calculatePercent(a,t,s);d.style.cssText=n?`top: ${c}%; bottom: ${100-l}%`:`left: ${c}%; right: ${100-l}%`}},546:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Runner=void 0,s(759);const i=s(995),n=s(868),r=s(827);class o extends i.EventEmitter{constructor(e,t){super(),this.handlePointerdownRunner=this.handlePointerdownRunner.bind(this),this.handleKeydownRunner=this.handleKeydownRunner.bind(this);const{dom:s,props:i}=this.init(e,t);this.dom=s,this.props=i}render(e){if((0,r.isRangeRenderedRunnerFrom)(this.props,e))return(0,r.destroy)(this.dom,this.props),void(this.props=(0,r.switchIsRender)(this.props));("from"!==this.props.type||e)&&(this.props.isRender||(this.dom.root.appendChild(this.dom.runner),this.props=(0,r.switchIsRender)(this.props)))}update(e,t){(0,r.toggleTarget)(this.props,this.dom,t),(0,r.move)(this.dom,this.props,e)}init(e,t){const s=(0,r.createElements)(e),i=(0,r.initProps)(t);return this.attachEventHandlers(s),{dom:s,props:i}}attachEventHandlers(e){e.runner.addEventListener("pointerdown",this.handlePointerdownRunner),e.runner.addEventListener("keydown",this.handleKeydownRunner)}handleKeydownRunner(e){const{code:t}=e,s=t=>{e.preventDefault();const{type:s}=this.props;this.emit("ChangedRunnerPositionStep",{type:s,touchRoute:t})};"ArrowUp"!==t&&"ArrowRight"!==t||s("up"),"ArrowDown"!==t&&"ArrowLeft"!==t||s("down")}handlePointerdownRunner(){const e=e=>{e.preventDefault(),this.dom.runner.ondragstart=()=>!1;const{type:t}=this.props,s=n.helpers.getPosition(this.dom.root,e);this.emit("ChangedRunnerPosition",{position:s,type:t})},t=()=>{document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",t)};document.addEventListener("pointermove",e),document.addEventListener("pointerup",t)}}t.Runner=o},827:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.move=t.toggleTarget=t.isRangeRenderedRunnerFrom=t.destroy=t.switchIsRender=t.initProps=t.createElements=void 0;const i=s(868);t.createElements=e=>{const t=i.helpers.createElement("slider__runner");return t.setAttribute("tabindex","0"),{root:e,runner:t}},t.initProps=e=>({isRender:!1,type:e});const n=e=>{const t=!e.isRender;return Object.assign(Object.assign({},e),{isRender:t})};t.switchIsRender=n,t.destroy=({runner:e},t)=>(e.remove(),n(t)),t.isRangeRenderedRunnerFrom=({type:e,isRender:t},s)=>"from"===e&&!s&&t,t.toggleTarget=({type:e},{runner:t},s)=>{s!==e?t.classList.remove("slider__runner_targeted"):t.classList.add("slider__runner_targeted")},t.move=({runner:e},{type:t},{min:s,max:n,from:r,to:o,isVertical:a})=>{const d=e,c="from"===t?r:o,l=i.helpers.calculatePercent(c,s,n),u=a?`top:${l}%;`:`left:${l}%;`;d.style.cssText=u}},760:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cssSelectors=void 0,t.cssSelectors={scale:"slider__scale",mark:"slider__mark"}},561:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Scale=void 0,s(131);const i=s(995),n=s(366);class r extends i.EventEmitter{constructor(e){super(),this.props={min:0,max:0,isVertical:!1},this.handlePointerdownScale=this.handlePointerdownScale.bind(this),this.handleWindowsResize=this.handleWindowsResize.bind(this);const{dom:t}=this.init(e);this.dom=t}render({min:e,max:t,isVertical:s,hasScale:i}){i?(this.props={min:e,max:t,isVertical:s},this.dom.root.appendChild(this.dom.scale),(0,n.update)(this.dom,this.props)):(0,n.destroy)(this.dom)}init(e){const t=(0,n.createElement)(e);return this.attachEventHandlers(t),{dom:t}}attachEventHandlers({scale:e}){return e.addEventListener("pointerdown",this.handlePointerdownScale),window.addEventListener("resize",this.handleWindowsResize),this}handlePointerdownScale(e){if(!(e.target instanceof HTMLSpanElement))return;if(!("customValue"in e.target))return;const t=Number(e.target.customValue);this.emit("ClickScale",{targetNumber:t})}handleWindowsResize(){(0,n.update)(this.dom,this.props)}}t.Scale=r},366:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.destroy=t.getScalePercents=t.createElement=void 0;const i=s(868),n=s(760);t.createElement=e=>({root:e,scale:i.helpers.createElement(n.cssSelectors.scale)});const r=e=>e>800?[0,10,20,30,40,50,60,70,80,90,100]:e>500?[0,20,40,60,80,100]:e>300?[0,33,66,100]:[0,100];t.getScalePercents=r,t.destroy=({scale:e})=>{e.remove()},t.update=(e,t)=>{(({scale:e})=>{for(;null!==e.firstChild;)e.removeChild(e.firstChild)})(e),(({scale:e},{isVertical:t},s)=>{s.forEach((s=>{const{percent:i,value:r}=s,o=t?`top: ${i}%`:`left: ${i}%`,a=document.createElement("span");a.classList.add(n.cssSelectors.mark),a.style.cssText=o,a.innerText=String(r),a.customValue=Number(r),e.appendChild(a)}))})(e,t,(({max:e,min:t,isVertical:s},{scale:i})=>{const{offsetHeight:n,offsetWidth:o}=i,a=r(s?n:o),d=Math.abs(e-t);return a.map((e=>({percent:e,value:Number((t+d*e/100).toFixed(1).replace(/\.?0+$/,""))})))})(t,e))}},880:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cssSelectors=void 0,t.cssSelectors={tip:"slider__tip",hiddenTip:"slider__tip_hidden",tipLine:"slider__tip-line",verticalTipLine:"slider__tip-line_vertical"}},875:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tip=void 0,s(39);const i=s(995),n=s(868),r=s(626),o=s(880);class a extends i.EventEmitter{constructor(e){super(),this.handlePointerdownTip=this.handlePointerdownTip.bind(this);const{dom:t}=this.init(e);this.dom=t}render({hasTip:e,isRange:t,isVertical:s}){e?(this.dom.root.insertAdjacentElement("afterbegin",this.dom.tipLine),t?(this.dom.tipLine.appendChild(this.dom.tipFrom),this.dom.tipLine.appendChild(this.dom.tipBoth)):(this.dom.tipFrom.remove(),this.dom.tipBoth.remove()),this.dom.tipLine.appendChild(this.dom.tipTo),s?this.dom.tipLine.classList.add(o.cssSelectors.verticalTipLine):this.dom.tipLine.classList.remove(o.cssSelectors.verticalTipLine)):(0,r.destroy)(this.dom)}update(e){const{dom:t}=this;(0,r.changeText)(e,t),(0,r.changePosition)(e,t),(0,r.toggleDisplay)(e,t)}init(e){const t=(0,r.createElements)(e);return this.attachEventHandlers(t),{dom:t}}attachEventHandlers({tipFrom:e,tipTo:t,tipBoth:s}){return e.addEventListener("pointerdown",this.handlePointerdownTip),t.addEventListener("pointerdown",this.handlePointerdownTip),s.addEventListener("pointerdown",this.handlePointerdownTip),this}handlePointerdownTip({target:e}){if(null===e)return;if(!("customType"in e))return;const{customType:t}=e,s=e=>{e.preventDefault();const s=e.target;if(!(s instanceof HTMLElement))return;s.ondragstart=()=>!1;const i=n.helpers.getPosition(this.dom.root,e);"both"!==t?"from"!==t&&"to"!==t||this.emit("ChangedRunnerPosition",{position:i,type:t}):this.emit("ChangedNearRunnerPosition",{position:i})},i=()=>{document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",i)};document.addEventListener("pointermove",s),document.addEventListener("pointerup",i)}}t.Tip=a},626:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.changeText=t.destroy=t.changePosition=t.toggleDisplay=t.createElements=void 0;const i=s(868),n=s(880);t.createElements=e=>{const t=i.helpers.createElement(n.cssSelectors.tipLine),s=i.helpers.createElement(n.cssSelectors.tip),r=i.helpers.createElement(n.cssSelectors.tip),o=i.helpers.createElement(n.cssSelectors.tip);return s.customType="from",r.customType="both",o.customType="to",{root:e,tipLine:t,tipFrom:s,tipBoth:r,tipTo:o}},t.toggleDisplay=({isRange:e,isVertical:t},{tipFrom:s,tipTo:i,tipBoth:r})=>{if(!e)return void i.classList.remove(n.cssSelectors.hiddenTip);const{x:o,y:a,height:d,width:c}=s.getBoundingClientRect(),l=i.getBoundingClientRect();if(t?a+d>=l.y:o+c>=l.x)return s.classList.add(n.cssSelectors.hiddenTip),r.classList.remove(n.cssSelectors.hiddenTip),void i.classList.add(n.cssSelectors.hiddenTip);s.classList.remove(n.cssSelectors.hiddenTip),r.classList.add(n.cssSelectors.hiddenTip),i.classList.remove(n.cssSelectors.hiddenTip)},t.changePosition=({min:e,max:t,isVertical:s,from:n,to:r,isRange:o},{tipBoth:a,tipFrom:d,tipTo:c})=>{const l=c,u=i.helpers.calculatePercent(r,e,t),p=s?`top: ${u}%;`:`left: ${u}%;`;if(l.style.cssText=p,!o)return;const h=d,m=a,v=i.helpers.calculatePercent(n,e,t),g=s?`top: ${v}%;`:`left: ${v}%;`,b=s?`top: ${(v+u)/2}%;`:`left: ${(v+u)/2}%;`;h.style.cssText=g,m.style.cssText=b},t.destroy=({tipLine:e})=>{e.remove()},t.changeText=({from:e,to:t,isRange:s},{tipFrom:i,tipTo:n,tipBoth:r})=>{if(n.innerText=String(t),!s)return;const o=i,a=r,d=e===t?String(t):`${e} - ${t}`;o.innerText=String(e),a.innerText=d}},195:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tip=t.Scale=t.Runner=t.Range=void 0;const i=s(512);Object.defineProperty(t,"Range",{enumerable:!0,get:function(){return i.Range}});const n=s(546);Object.defineProperty(t,"Runner",{enumerable:!0,get:function(){return n.Runner}});const r=s(561);Object.defineProperty(t,"Scale",{enumerable:!0,get:function(){return r.Scale}});const o=s(875);Object.defineProperty(t,"Tip",{enumerable:!0,get:function(){return o.Tip}})},620:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Presenter=t.View=t.Model=void 0;const i=s(20);Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return i.Model}});const n=s(341);Object.defineProperty(t,"View",{enumerable:!0,get:function(){return n.View}});const r=s(867);Object.defineProperty(t,"Presenter",{enumerable:!0,get:function(){return r.Presenter}})},89:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultConfig=void 0,t.defaultConfig={isRange:!0,isVertical:!1,hasTip:!0,hasScale:!0,step:10,min:0,max:100,from:40,to:70}},995:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this.events={}}subscribe(e,t){const s=this.events[e];this.events[e]=void 0===s?[t]:[...s,t]}unsubscribe(e,t){var s;this.events[e]=null===(s=this.events[e])||void 0===s?void 0:s.filter((e=>t!==e))}emit(e,t){var s;null===(s=this.events[e])||void 0===s||s.forEach((e=>e(t)))}}},12:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePercent=void 0,t.calculatePercent=(e,t,s)=>(e-t)/(s-t)*100},109:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=void 0,t.createElement=e=>{const t=document.createElement("div");return t.classList.add(e),t}},212:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPosition=void 0,t.getPosition=(e,t)=>{const{height:s,width:i,left:n,top:r}=e.getBoundingClientRect(),{clientX:o,clientY:a}=t;return{x:(o-n)/i,y:(a-r)/s}}},868:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.helpers=void 0;const i=s(109),n=s(212),r=s(12),o={createElement:i.createElement,getPosition:n.getPosition,calculatePercent:r.calculatePercent};t.helpers=o}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=s(833);$.fn.slider=function(t){return this.map(((s,i)=>new e.App(i,t)))}})()})();