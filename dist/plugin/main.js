(()=>{"use strict";var t={822:(t,e,i)=>{i.r(e)},810:(t,e,i)=>{i.r(e)},908:(t,e,i)=>{i.r(e)},441:(t,e,i)=>{i.r(e)},353:(t,e,i)=>{i.r(e)},729:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.events={}}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)}unsubscribe(t,e){this.events[t]=this.events[t].filter((t=>e!==t))}emit({eventName:t,eventArguments:e}){const i=this.events[t];i&&i.forEach((t=>t.call(null,e)))}}},828:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(729)),r=s(i(371)),o=s(i(657)),a=s(i(883)),l=s(i(896));e.default=class{constructor(t,e){this.init(t,e)}update(t){void 0!==t&&(void 0!==t.onChange&&(this.callbacks.onChange=t.onChange),this.presenter.updateOptions(t))}getOptions(){return this.presenter.getOptions()}init(t,e){this.callbacks=Object.assign({},l.default.callbacks);const i=JSON.parse(JSON.stringify(Object.assign({},l.default.defaultConfig)));this.eventEmitter=new n.default,this.model=new r.default(i,this.eventEmitter),this.view=new o.default(t,i,this.eventEmitter),this.presenter=new a.default(this.view,this.model,this.eventEmitter),this.attachEventEmitters(),this.update(e)}attachEventEmitters(){this.eventEmitter.subscribe("onChange",(t=>{this.callbacks.onChange(t)}))}}},896:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={defaultConfig:{isRange:!0,isVertical:!1,hasTip:!0,hasScale:!0,step:10,min:0,max:100,values:[40,70]},callbacks:{onChange:()=>{}}}},371:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(271));e.default=class{constructor(t,e){this.eventEmitter=e,this.options=t,this.validator=new n.default(this.options)}updateOptions(t){this.validator.validateOptions(t),this.eventEmitter.emit({eventName:"UpdatedModelOptions",eventArguments:this.options})}getOptions(){return this.options}calculateValueUsingFraction({position:t,valueIndex:e}){const i=this.getNewValueUsingFraction(t);this.changeValueDependingOnStep(i,e),this.eventEmitter.emit({eventName:"UpdatedModelValues",eventArguments:this.options})}calculateNearValueUsingFraction(t){const e=this.getNewValueUsingFraction(t),i=this.getNearValueId(e);this.changeValueDependingOnStep(e,i),this.eventEmitter.emit({eventName:"UpdatedModelValues",eventArguments:this.options})}updateNearValue(t){const e=this.getNearValueId(t);this.options.values[e]=t,this.eventEmitter.emit({eventName:"UpdatedModelValues",eventArguments:this.options})}updateValueByStep({valueIndex:t,touchRoute:e}){const{step:i,values:s}=this.options,n="up"===e?s[t]+i:s[t]-i,[r,o]=this.getMinimumAndMaximum(t);this.options.values[t]=n<r?r:n>o?o:n,this.eventEmitter.emit({eventName:"UpdatedModelValues",eventArguments:this.options})}getNearValueId(t){const{isRange:e,values:i}=this.options;return e&&Math.abs(i[0]-t)<Math.abs(i[1]-t)?0:1}getNewValueUsingFraction(t){const{min:e,max:i}=this.options;return(i-e)*t+e}getMinimumAndMaximum(t){const{values:e,min:i,max:s,isRange:n}=this.options;return[0!==t&&n?e[0]:i,0===t?e[1]:s]}changeValueDependingOnStep(t,e){const{step:i}=this.options,[s,n]=this.getMinimumAndMaximum(e),r=this.options.values[e],o=Math.abs(t-r),a=o%i;if(t<s)this.options.values[e]=s;else if(t>n)this.options.values[e]=n;else{if(!(o<i/2))return a<i/2?t>r?void(this.options.values[e]=t-a):void(this.options.values[e]=t+a):void(this.options.values[e]=t+a-i<s?s:t-a+i>n?n:t>r?t-a+i:t+a-i);this.options.values[e]=r}}}},271:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t){this.options=t}validateOptions(t){const{isRange:e,isVertical:i,hasTip:s,hasScale:n,step:r,min:o,max:a,values:l}=t;"boolean"==typeof e&&(this.options.isRange=e),"boolean"==typeof i&&(this.options.isVertical=i),"boolean"==typeof s&&(this.options.hasTip=s),"boolean"==typeof n&&(this.options.hasScale=n),this.verifyMinAndMax(o,a),this.verifyValues(l),this.verifyStep(r)}verifyMinAndMax(t,e){const{min:s,max:n}=this.options,r=i.makeNumber(s,t),o=i.makeNumber(n,e);if(r===o)return this.options.min=r,void(this.options.max=o+1);const[a,l]=[r,o].sort(((t,e)=>t-e));this.options.min=a,this.options.max=l}verifyValues(t){const{min:e,max:s,values:n}=this.options,r=i.makeNumber(n[0],null==t?void 0:t[0]),o=i.makeNumber(n[1],null==t?void 0:t[1]),[a,l]=[r,o].sort(((t,e)=>t-e));this.options.values[0]=a>e?a:e,this.options.values[1]=l<s?l:s}verifyStep(t){const{min:e,max:s,step:n}=this.options,r=Math.round(i.makeNumber(n,t));if(r<=1)return void(this.options.step=1);const o=s-e;this.options.step=r<o?r:o}static makeNumber(t,e){return/^(-|\+)?([0-9]+)?(\.|,)?([0-9]+)$/.test(e)?Number(e):t}}e.default=i},883:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,i){this.view=t,this.model=e,this.eventEmitter=i,this.attachEventEmittersToModel(),this.attachEventEmittersToView()}updateOptions(t){this.model.updateOptions(t)}getOptions(){return this.model.getOptions()}attachEventEmittersToModel(){this.eventEmitter.subscribe("ClickScale",(t=>{this.model.updateNearValue(t)})),this.eventEmitter.subscribe("ChangedRunnerPosition",(({position:t,valueIndex:e})=>{this.model.calculateValueUsingFraction({position:t,valueIndex:e})})),this.eventEmitter.subscribe("ChangedRunnerPositionStep",(({valueIndex:t,touchRoute:e})=>{this.model.updateValueByStep({valueIndex:t,touchRoute:e})}))}attachEventEmittersToView(){this.eventEmitter.subscribe("UpdatedModelOptions",(t=>{this.view.render(t),this.eventEmitter.emit({eventName:"onChange",eventArguments:t})})),this.eventEmitter.subscribe("UpdatedModelValues",(t=>{this.view.changeValues(t),this.eventEmitter.emit({eventName:"onChange",eventArguments:t})}))}}},365:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(822);const n=s(i(181));class r extends n.default{constructor(t,e,i){super(t,e,i),this.init()}render(){const{isVertical:t,isRange:e,values:i}=this.options;this.root.appendChild(this.range);const s=e?this.calculatePercent(i[0]):0,n=this.calculatePercent(i[1]);this.range.style.cssText=t?`top: ${s}%; bottom: ${100-n}%`:`left: ${s}%; right: ${100-n}%`}init(){this.range=n.default.getElement("slider__range")}}e.default=r},731:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(810);const n=s(i(181));class r extends n.default{constructor(t,e,i,s,n){super(t,e,i),this.isRender=!1,this.valueIndex=s,this.target=n,this.init()}render(){const{target:t,valueIndex:e}=this,{isVertical:i}=this.options;this.isRender||(this.root.appendChild(this.runner),this.isRender=!0),t.valueIndex===e?this.runner.classList.add("slider__runner_targeted"):this.runner.classList.remove("slider__runner_targeted");const s=this.calculatePercent(this.options.values[e]),n=i?`top:${s}%;`:`left:${s}%;`;this.runner.style.cssText=n}destroy(){this.runner.remove(),this.isRender=!1}init(){this.runner=n.default.getElement("slider__runner"),this.runner.setAttribute("tabindex","0"),this.runner.addEventListener("pointerdown",this.attachEventOnPointerDown.bind(this)),this.runner.addEventListener("keydown",this.attachEventOnPressingKeyboard.bind(this))}attachEventOnPressingKeyboard(t){const{code:e}=t,{valueIndex:i}=this,s=e=>{t.preventDefault(),this.target.valueIndex=i,this.eventEmitter.emit({eventName:"ChangedRunnerPositionStep",eventArguments:{valueIndex:i,touchRoute:e}})};"ArrowUp"!==e&&"ArrowRight"!==e||s("up"),"ArrowDown"!==e&&"ArrowLeft"!==e||s("down")}attachEventOnPointerDown(){const t=t=>{t.preventDefault(),this.runner.ondragstart=()=>!1;const{valueIndex:e}=this;this.target.valueIndex=e;const i=this.getPosition(this.root,t);this.eventEmitter.emit({eventName:"ChangedRunnerPosition",eventArguments:{position:i,valueIndex:e}})},e=()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",e)};document.addEventListener("pointermove",t),document.addEventListener("pointerup",e)}}e.default=r},694:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(908);const n=s(i(181));class r extends n.default{constructor(t,e,i){super(t,e,i),this.init()}render(){this.deleteMarks(),this.root.appendChild(this.scale);const t=this.getScaleParameters();this.draw(t)}destroy(){this.scale.remove()}init(){this.scale=n.default.getElement("slider__scale"),this.scale.addEventListener("pointerdown",this.clickScale.bind(this)),window.addEventListener("resize",this.handlerResizeScale.bind(this))}deleteMarks(){for(;this.scale.firstChild;)this.scale.removeChild(this.scale.firstChild)}draw(t){const{isVertical:e}=this.options;t.forEach((t=>{const{percent:i,text:s}=t,n=e?`top: ${i}%`:`left: ${i}%`,r=document.createElement("span");r.classList.add("slider__mark"),r.style.cssText=n,r.innerText=s,this.scale.appendChild(r)}))}handlerResizeScale(){this.render()}clickScale(t){const{innerHTML:e}=t.target,i=Number(e);isNaN(i)||this.eventEmitter.emit({eventName:"ClickScale",eventArguments:i})}static getScalePercents(t){return t>800?[0,10,20,30,40,50,60,70,80,90,100]:t>500?[0,20,40,60,80,100]:t>300?[0,33,66,100]:[0,100]}getScaleParameters(){const{max:t,min:e,isVertical:i}=this.options,{offsetHeight:s,offsetWidth:n}=this.scale,o=i?s:n,a=r.getScalePercents(o),l=Math.abs(t-e);return a.map((t=>({percent:t,text:(e+l*t/100).toFixed(1).replace(/\.?0+$/,"")})))}}e.default=r},181:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,i){this.root=t,this.options=e,this.eventEmitter=i}calculatePercent(t){const{min:e,max:i}=this.options;return(t-e)/(i-e)*100}static getElement(t){const e=document.createElement("div");return e.classList.add(t),e}getPosition(t,e){const{isVertical:i}=this.options,{height:s,width:n,left:r,top:o}=t.getBoundingClientRect(),{clientX:a,clientY:l}=e;return i?(l-o)/s:(a-r)/n}}},261:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(441);const n=s(i(181));class r extends n.default{constructor(t,e,i){super(t,e,i),this.init()}render(){const{isVertical:t}=this.options;this.root.insertAdjacentElement("afterbegin",this.tipLine),this.tipLine.appendChild(this.tipFrom),this.tipLine.appendChild(this.tipBoth),this.tipLine.appendChild(this.tipTo),this.changeText(),this.changePosition(),t?this.tipLine.classList.add("slider__tip-line_vertical"):this.tipLine.classList.remove("slider__tip-line_vertical"),this.toggleDisplay()}destroy(){this.tipLine.remove()}init(){this.tipLine=n.default.getElement("slider__tip-line"),this.tipFrom=n.default.getElement("slider__tip"),this.tipBoth=n.default.getElement("slider__tip"),this.tipTo=n.default.getElement("slider__tip")}changePosition(){const{isVertical:t,values:e}=this.options,i=this.calculatePercent(e[0]),s=this.calculatePercent(e[1]),n=t?`top: ${s}%;`:`left: ${s}%;`,r=t?`top: ${i}%;`:`left: ${i}%;`,o=t?`top: ${(i+s)/2}%;`:`left: ${(i+s)/2}%;`;this.tipFrom.style.cssText=r,this.tipBoth.style.cssText=o,this.tipTo.style.cssText=n}changeText(){const{values:t}=this.options,e=t[0]===t[1]?String(t[1]):`${t[0]} - ${t[1]}`;this.tipFrom.innerText=String(t[0]),this.tipTo.innerText=String(t[1]),this.tipBoth.innerText=e}toggleDisplay(){const{isRange:t,isVertical:e}=this.options;if(!t)return this.tipFrom.remove(),void this.tipBoth.remove();const i=this.tipFrom.getBoundingClientRect(),s=this.tipTo.getBoundingClientRect();if(e?i.y+i.height>=s.y:i.x+i.width>=s.x)return this.tipFrom.remove(),void this.tipTo.remove();this.tipBoth.remove()}}e.default=r},657:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(353);const n=s(i(261)),r=s(i(731)),o=s(i(365)),a=s(i(694));e.default=class{constructor(t,e,i){this.target={valueIndex:0},this.root=t,this.options=e,this.eventEmitter=i,this.init()}render(t){this.switchTarget(t),this.changeValues(t);const{isVertical:e,hasScale:i}=t;e?this.slider.classList.add("slider_vertical"):this.slider.classList.remove("slider_vertical"),i?this.scale.render():this.scale.destroy()}changeValues(t){this.options=t;const{isRange:e,hasTip:i}=t;i?this.tip.render():this.tip.destroy(),this.range.render(),e?this.runnerFrom.render():this.runnerFrom.destroy(),this.runnerTo.render()}init(){this.createElements();const{eventEmitter:t,slider:e,barContainer:i,options:s,target:l}=this;this.tip=new n.default(e,s,t),this.range=new o.default(i,s,t),this.scale=new a.default(e,s,t),this.runnerFrom=new r.default(i,s,t,0,l),this.runnerTo=new r.default(i,s,t,1,l),this.root.appendChild(this.slider),this.slider.appendChild(this.barContainer)}createElements(){this.slider=document.createElement("div"),this.slider.classList.add("slider"),this.barContainer=document.createElement("div"),this.barContainer.classList.add("slider__bar-container")}switchTarget(t){const{values:e,max:i,min:s}=t,n=e[0]<(i-s)/2;this.target.valueIndex=n?1:0}}},544:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(828));$.fn.slider=function(t){return this.map(((e,i)=>new n.default(i,t)))}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(544)})();