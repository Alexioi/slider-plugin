(()=>{"use strict";var t={869:(t,e,i)=>{i.r(e)},330:(t,e,i)=>{i.r(e)},822:(t,e,i)=>{i.r(e)},810:(t,e,i)=>{i.r(e)},908:(t,e,i)=>{i.r(e)},441:(t,e,i)=>{i.r(e)},353:(t,e,i)=>{i.r(e)},179:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(414));i(869);const a=s(i(996));i(544);const r=$(".js-panel__example").slider();$(".js-panel__control").each(((t,e)=>{new a.default($(e),r[t],n.default[t])}))},996:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),i(330),e.default=class{constructor(t,e,i){this.changeTextValue=(t,e)=>{if("from"===e||"to"===e){const t=Number(this.$from.val()),e=Number(this.$to.val());this.slider.update({values:[t,e]})}else{const i=Number(t.val());this.slider.update({[e]:i})}this.verifyInputs()},this.$element=t,this.slider=e,this.init(i)}init(t){this.slider.update(t),this.searchElements(),this.attachEventHandlers(),this.verifyInputs(),this.attachCallback()}attachCallback(){const t=this;this.slider.update({onChange:function(e){t.$from.val(e.values[0]),t.$to.val(e.values[1])}})}searchElements(){this.$range=this.$element.find(".panel__input_name-range"),this.$vertical=this.$element.find(".panel__input_name-vertical"),this.$scale=this.$element.find(".panel__input_name-scale"),this.$min=this.$element.find(".panel__input_name-min"),this.$max=this.$element.find(".panel__input_name-max"),this.$from=this.$element.find(".panel__input_name-from"),this.$to=this.$element.find(".panel__input_name-to"),this.$step=this.$element.find(".panel__input_name-step"),this.$tip=this.$element.find(".panel__input_name-tip")}attachEventHandlers(){this.$range.on("click",this.changeCheckboxValue.bind(this,this.$range,"isRange")),this.$vertical.on("click",this.changeCheckboxValue.bind(this,this.$vertical,"isVertical")),this.$tip.on("click",this.changeCheckboxValue.bind(this,this.$tip,"hasTip")),this.$scale.on("click",this.changeCheckboxValue.bind(this,this.$scale,"hasScale")),this.$min.on("change",this.changeTextValue.bind(this,this.$min,"min")),this.$max.on("change",this.changeTextValue.bind(this,this.$max,"max")),this.$from.on("change",this.changeTextValue.bind(this,this.$from,"from")),this.$to.on("change",this.changeTextValue.bind(this,this.$to,"to")),this.$step.on("change",this.changeTextValue.bind(this,this.$step,"step"))}changeCheckboxValue(t,e){const i=t.prop("checked");this.slider.update({[e]:i}),this.verifyInputs()}verifyInputs(){const t=this.slider.getOptions(),{isRange:e,isVertical:i,values:s,min:n,max:a,hasScale:r,hasTip:o,step:h}=t;this.$range.prop("checked",e),this.$vertical.prop("checked",i),this.$min.val(n),this.$max.val(a),this.$from.val(s[0]),this.$to.val(s[1]),this.$step.val(h),this.$tip.prop("checked",o),this.$scale.prop("checked",r)}}},729:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.events={}}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)}unsubscribe(t,e){this.events[t]=this.events[t].filter((t=>e!==t))}emit({eventName:t,eventArguments:e}){const i=this.events[t];i&&i.forEach((t=>t.call(null,e)))}}},232:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(729)),a=s(i(313)),r=s(i(657)),o=s(i(76)),h=s(i(896));e.default=class{constructor(t,e){this.init(t,e)}update(t){void 0!==t&&(void 0!==t.onChange&&(this.callbacks.onChange=t.onChange),this.presenter.updateOptions(t))}getOptions(){return this.presenter.getOptions()}init(t,e){this.callbacks=Object.assign({},h.default.callbacks);const i=JSON.parse(JSON.stringify(Object.assign({},h.default.defaultConfig)));this.eventEmitter=new n.default,this.model=new a.default(i,this.eventEmitter),this.view=new r.default(t,i,this.eventEmitter),this.presenter=new o.default(this.view,this.model,this.eventEmitter),this.attachEventEmitters(),this.update(e)}attachEventEmitters(){this.eventEmitter.subscribe("onChange",(t=>{this.callbacks.onChange(t)}))}}},896:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={defaultConfig:{isRange:!0,isVertical:!1,hasTip:!0,hasScale:!0,step:10,min:0,max:100,values:[40,70]},callbacks:{onChange:()=>{}}}},313:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(271));e.default=class{constructor(t,e){this.eventEmitter=e,this.options=t,this.validator=new n.default(this.options)}updateOptions(t){this.validator.validateOptions(t),this.eventEmitter.emit({eventName:"UpdatedModelOptions",eventArguments:this.options})}getOptions(){return this.options}calculateValueUsingFraction({position:t,valueIndex:e}){const i=this.getNewValueUsingFraction(t);this.changeValueDependingOnStep(i,e),this.eventEmitter.emit({eventName:"UpdatedModelValues",eventArguments:this.options})}calculateNearValueUsingFraction(t){const e=this.getNewValueUsingFraction(t),i=this.getNearValueId(e);this.changeValueDependingOnStep(e,i),this.eventEmitter.emit({eventName:"UpdatedModelValues",eventArguments:this.options})}updateNearValue(t){const e=this.getNearValueId(t);this.options.values[e]=t,this.eventEmitter.emit({eventName:"UpdatedModelValues",eventArguments:this.options})}updateValueByStep({valueIndex:t,touchRoute:e}){const{step:i,values:s}=this.options,n="up"===e?s[t]+i:s[t]-i,[a,r]=this.getMinimumAndMaximum(t);this.options.values[t]=n<a?a:n>r?r:n,this.eventEmitter.emit({eventName:"UpdatedModelValues",eventArguments:this.options})}getNearValueId(t){const{isRange:e,values:i}=this.options;if(!e)return 1;const s=Math.abs(i[0]-t),n=Math.abs(i[1]-t);return s===n?i[0]>t?0:1:s<n?0:1}getNewValueUsingFraction(t){const{min:e,max:i}=this.options;return(i-e)*t+e}getMinimumAndMaximum(t){const{values:e,min:i,max:s,isRange:n}=this.options;return[0!==t&&n?e[0]:i,0===t?e[1]:s]}changeValueDependingOnStep(t,e){const{step:i}=this.options,[s,n]=this.getMinimumAndMaximum(e),a=this.options.values[e],r=Math.abs(t-a),o=r%i;if(t<s)this.options.values[e]=this.getRoundingNumber(s);else if(t>n)this.options.values[e]=this.getRoundingNumber(n);else{if(!(r<i/2))return o<i/2?t>a?void(this.options.values[e]=this.getRoundingNumber(t-o)):void(this.options.values[e]=this.getRoundingNumber(t+o)):void(this.options.values[e]=t+o-i<s?this.getRoundingNumber(s):t-o+i>n?this.getRoundingNumber(n):t>a?this.getRoundingNumber(t-o+i):this.getRoundingNumber(t+o-i));this.options.values[e]=this.getRoundingNumber(a)}}getRoundingNumber(t){const{step:e}=this.options;if(e>=1)return t;const i=String(e).split(".")[1].length;return Number(t.toFixed(i))}}},271:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t){this.options=t}validateOptions(t){const{isRange:e,isVertical:i,hasTip:s,hasScale:n,step:a,min:r,max:o,values:h}=t;"boolean"==typeof e&&(this.options.isRange=e),"boolean"==typeof i&&(this.options.isVertical=i),"boolean"==typeof s&&(this.options.hasTip=s),"boolean"==typeof n&&(this.options.hasScale=n),this.verifyMinAndMax(r,o),this.verifyValues(h),this.verifyStep(a)}verifyMinAndMax(t,e){const{min:s,max:n}=this.options,a=i.makeNumber(s,t),r=i.makeNumber(n,e);if(a===r)return this.options.min=a,void(this.options.max=r+1);const[o,h]=[a,r].sort(((t,e)=>t-e));this.options.min=o,this.options.max=h}verifyValues(t){const{min:e,max:s,values:n}=this.options,a=i.makeNumber(n[0],null==t?void 0:t[0]),r=i.makeNumber(n[1],null==t?void 0:t[1]);let[o,h]=[a,r].sort(((t,e)=>t-e));h>s&&(h=s),h<e&&(h=e),o<e&&(o=e),o>h&&(o=h),this.options.values[0]=o,this.options.values[1]=h}verifyStep(t){const{min:e,max:s,step:n}=this.options,a=i.makeNumber(n,t);if(a<=0)return void(this.options.step=1);const r=s-e;this.options.step=a<r?a:r}static makeNumber(t,e){return/^(-|\+)?([0-9]+)?(\.|,)?([0-9]+)$/.test(e)?Number(e):t}}e.default=i},76:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,i){this.view=t,this.model=e,this.eventEmitter=i,this.attachEventEmittersToModel(),this.attachEventEmittersToView()}updateOptions(t){this.model.updateOptions(t)}getOptions(){return this.model.getOptions()}attachEventEmittersToModel(){this.eventEmitter.subscribe("ClickScale",(t=>{this.model.updateNearValue(t)})),this.eventEmitter.subscribe("ChangedRunnerPosition",(({position:t,valueIndex:e})=>{this.model.calculateValueUsingFraction({position:t,valueIndex:e})})),this.eventEmitter.subscribe("ChangedRunnerPositionStep",(({valueIndex:t,touchRoute:e})=>{this.model.updateValueByStep({valueIndex:t,touchRoute:e})})),this.eventEmitter.subscribe("ChangedNearRunnerPosition",(({position:t})=>{this.model.calculateNearValueUsingFraction(t)}))}attachEventEmittersToView(){this.eventEmitter.subscribe("UpdatedModelOptions",(t=>{this.view.render(t),this.eventEmitter.emit({eventName:"onChange",eventArguments:t})})),this.eventEmitter.subscribe("UpdatedModelValues",(t=>{this.view.changeValues(t),this.eventEmitter.emit({eventName:"onChange",eventArguments:t})}))}}},365:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(822);const n=s(i(181));class a extends n.default{constructor(t,e,i){super(t,e,i),this.init()}render(){const{isVertical:t,isRange:e,values:i}=this.options;this.root.appendChild(this.range);const s=e?this.calculatePercent(i[0]):0,n=this.calculatePercent(i[1]);this.range.style.cssText=t?`top: ${s}%; bottom: ${100-n}%`:`left: ${s}%; right: ${100-n}%`}init(){this.range=n.default.getElement("slider__range")}}e.default=a},731:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(810);const n=s(i(181));class a extends n.default{constructor(t,e,i,s,n){super(t,e,i),this.isRender=!1,this.valueIndex=s,this.target=n,this.init()}render(){const{target:t,valueIndex:e}=this,{isVertical:i}=this.options;this.isRender||(this.root.appendChild(this.runner),this.isRender=!0),t.valueIndex===e?this.runner.classList.add("slider__runner_targeted"):this.runner.classList.remove("slider__runner_targeted");const s=this.calculatePercent(this.options.values[e]),n=i?`top:${s}%;`:`left:${s}%;`;this.runner.style.cssText=n}destroy(){this.runner.remove(),this.isRender=!1}init(){this.runner=n.default.getElement("slider__runner"),this.runner.setAttribute("tabindex","0"),this.runner.addEventListener("pointerdown",this.attachEventOnPointerDown.bind(this)),this.runner.addEventListener("keydown",this.attachEventOnPressingKeyboard.bind(this))}attachEventOnPressingKeyboard(t){const{code:e}=t,{valueIndex:i}=this,s=e=>{t.preventDefault(),this.target.valueIndex=i,this.eventEmitter.emit({eventName:"ChangedRunnerPositionStep",eventArguments:{valueIndex:i,touchRoute:e}})};"ArrowUp"!==e&&"ArrowRight"!==e||s("up"),"ArrowDown"!==e&&"ArrowLeft"!==e||s("down")}attachEventOnPointerDown(){const t=t=>{t.preventDefault(),this.runner.ondragstart=()=>!1;const{valueIndex:e}=this;this.target.valueIndex=e;const i=this.getPosition(this.root,t);this.eventEmitter.emit({eventName:"ChangedRunnerPosition",eventArguments:{position:i,valueIndex:e}})},e=()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",e)};document.addEventListener("pointermove",t),document.addEventListener("pointerup",e)}}e.default=a},694:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(908);const n=s(i(181));class a extends n.default{constructor(t,e,i){super(t,e,i),this.init()}render(){this.deleteMarks(),this.root.appendChild(this.scale);const t=this.getScaleParameters();this.draw(t)}destroy(){this.scale.remove()}init(){this.scale=n.default.getElement("slider__scale"),this.scale.addEventListener("pointerdown",this.clickScale.bind(this)),window.addEventListener("resize",this.handlerResizeScale.bind(this))}deleteMarks(){for(;this.scale.firstChild;)this.scale.removeChild(this.scale.firstChild)}draw(t){const{isVertical:e}=this.options;t.forEach((t=>{const{percent:i,text:s}=t,n=e?`top: ${i}%`:`left: ${i}%`,a=document.createElement("span");a.classList.add("slider__mark"),a.style.cssText=n,a.innerText=s,this.scale.appendChild(a)}))}handlerResizeScale(){this.render()}clickScale(t){const{innerHTML:e}=t.target,i=Number(e);isNaN(i)||this.eventEmitter.emit({eventName:"ClickScale",eventArguments:i})}static getScalePercents(t){return t>800?[0,10,20,30,40,50,60,70,80,90,100]:t>500?[0,20,40,60,80,100]:t>300?[0,33,66,100]:[0,100]}getScaleParameters(){const{max:t,min:e,isVertical:i}=this.options,{offsetHeight:s,offsetWidth:n}=this.scale,r=i?s:n,o=a.getScalePercents(r),h=Math.abs(t-e);return o.map((t=>({percent:t,text:(e+h*t/100).toFixed(1).replace(/\.?0+$/,"")})))}}e.default=a},181:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,i){this.root=t,this.options=e,this.eventEmitter=i}calculatePercent(t){const{min:e,max:i}=this.options;return(t-e)/(i-e)*100}static getElement(t){const e=document.createElement("div");return e.classList.add(t),e}getPosition(t,e){const{isVertical:i}=this.options,{height:s,width:n,left:a,top:r}=t.getBoundingClientRect(),{clientX:o,clientY:h}=e;return i?(h-r)/s:(o-a)/n}}},261:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(441);const n=s(i(181));class a extends n.default{constructor(t,e,i,s){super(t,e,i),this.target=s,this.init()}render(){const{isVertical:t}=this.options;this.root.insertAdjacentElement("afterbegin",this.tipLine),this.tipLine.appendChild(this.tipFrom),this.tipLine.appendChild(this.tipBoth),this.tipLine.appendChild(this.tipTo),this.changeText(),this.changePosition(),t?this.tipLine.classList.add("slider__tip-line_vertical"):this.tipLine.classList.remove("slider__tip-line_vertical"),this.toggleDisplay()}destroy(){this.tipLine.remove()}init(){this.tipLine=n.default.getElement("slider__tip-line"),this.tipFrom=n.default.getElement("slider__tip"),this.tipBoth=n.default.getElement("slider__tip"),this.tipTo=n.default.getElement("slider__tip"),this.tipFrom.addEventListener("pointerdown",this.attachEventOnPointerDown.bind(this,{node:this.tipFrom,valueIndex:0})),this.tipTo.addEventListener("pointerdown",this.attachEventOnPointerDown.bind(this,{node:this.tipTo,valueIndex:1})),this.tipBoth.addEventListener("pointerdown",this.attachEventOnPointerDown.bind(this,{node:this.tipBoth}))}changePosition(){const{isVertical:t,values:e}=this.options,i=this.calculatePercent(e[0]),s=this.calculatePercent(e[1]),n=t?`top: ${s}%;`:`left: ${s}%;`,a=t?`top: ${i}%;`:`left: ${i}%;`,r=t?`top: ${(i+s)/2}%;`:`left: ${(i+s)/2}%;`;this.tipFrom.style.cssText=a,this.tipBoth.style.cssText=r,this.tipTo.style.cssText=n}changeText(){const{values:t}=this.options,e=t[0]===t[1]?String(t[1]):`${t[0]} - ${t[1]}`;this.tipFrom.innerText=String(t[0]),this.tipTo.innerText=String(t[1]),this.tipBoth.innerText=e}toggleDisplay(){const{isRange:t,isVertical:e}=this.options;if(!t)return this.tipFrom.remove(),void this.tipBoth.remove();const i=this.tipFrom.getBoundingClientRect(),s=this.tipTo.getBoundingClientRect();if(e?i.y+i.height>=s.y:i.x+i.width>=s.x)return this.tipFrom.remove(),void this.tipTo.remove();this.tipBoth.remove()}attachEventOnPointerDown({node:t,valueIndex:e}){const i=i=>{i.preventDefault(),t.ondragstart=()=>!1;const s=this.getPosition(this.root,i);void 0!==e?(this.target.valueIndex=e,this.eventEmitter.emit({eventName:"ChangedRunnerPosition",eventArguments:{position:s,valueIndex:e}})):this.eventEmitter.emit({eventName:"ChangedNearRunnerPosition",eventArguments:{position:s}})},s=()=>{document.removeEventListener("pointermove",i),document.removeEventListener("pointerup",s)};document.addEventListener("pointermove",i),document.addEventListener("pointerup",s)}}e.default=a},657:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(353);const n=s(i(261)),a=s(i(731)),r=s(i(365)),o=s(i(694));e.default=class{constructor(t,e,i){this.target={valueIndex:0},this.root=t,this.options=e,this.eventEmitter=i,this.init()}render(t){this.switchTarget(t);const{isVertical:e,hasScale:i}=t;e?this.slider.classList.add("slider_vertical"):this.slider.classList.remove("slider_vertical"),i?this.scale.render():this.scale.destroy(),this.changeValues(t)}changeValues(t){this.options=t;const{isRange:e,hasTip:i}=t;i?this.tip.render():this.tip.destroy(),this.range.render(),e?this.runnerFrom.render():this.runnerFrom.destroy(),this.runnerTo.render()}init(){this.createElements();const{eventEmitter:t,slider:e,barContainer:i,options:s,target:h}=this;this.tip=new n.default(e,s,t,h),this.range=new r.default(i,s,t),this.scale=new o.default(e,s,t),this.runnerFrom=new a.default(i,s,t,0,h),this.runnerTo=new a.default(i,s,t,1,h),this.root.appendChild(this.slider),this.slider.appendChild(this.barContainer),this.render(s)}createElements(){this.slider=document.createElement("div"),this.slider.classList.add("slider"),this.barContainer=document.createElement("div"),this.barContainer.classList.add("slider__bar-container")}switchTarget({values:t,max:e,min:i}){const{abs:s}=Math,n=s(i-t[0])/s(e-i)<.5;this.target.valueIndex=n?1:0}}},544:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(232));$.fn.slider=function(t){return this.map(((e,i)=>new n.default(i,t)))}},414:t=>{t.exports=JSON.parse('[{"isRange":true,"isVertical":false,"hasTip":true,"hasScale":true,"step":10,"min":-100,"max":100,"values":[-50,40]},{"isRange":true,"isVertical":true,"hasTip":true,"hasScale":true,"step":10,"min":100,"max":200,"values":[100,150]},{"isRange":true,"isVertical":false,"hasTip":true,"hasScale":true,"step":10,"min":-100,"max":100,"values":[-50,40]},{"isRange":true,"isVertical":false,"hasTip":true,"hasScale":true,"step":10,"min":-100,"max":100,"values":[-50,40]}]')}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,i),a.exports}i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(179)})();